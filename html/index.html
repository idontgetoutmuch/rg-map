<!DOCTYPE html>
<html>
<head>
<!----------------------------------------------------------

	Copyright (c) 2016 Jean-Marc VIGLINO,
	released under CeCILL-B (french BSD like) licence: http://www.cecill.info/

------------------------------------------------------------>
	<title>Georeferencer</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

	<!-- jQuery -->
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

	<!-- Openlayers -->
    <link rel="stylesheet" href="http://openlayers.org/en/v4.6.5/css/ol.css" />
	<script type="text/javascript" src="http://openlayers.org/en/v4.6.5/build/ol.js"></script>
	<!-- http://openlayers.org/en/v4.6.5/build/ol-debug.js -->

	<!-- Geoportail-KISS -->
	<script type="text/javascript" src="https://cdn.rawgit.com/Viglino/Geoportail-KISS/gh-pages/geoportailconfig.js"></script>
	<script type="text/javascript" src="https://cdn.rawgit.com/Viglino/Geoportail-KISS/gh-pages/ol3/geoportail.js"></script>
	<script type="text/javascript" src="https://cdn.rawgit.com/Viglino/Geoportail-KISS/gh-pages/apikey.js"></script>

	<!-- ol-ext -->
	<link rel="stylesheet" href="https://cdn.rawgit.com/Viglino/ol-ext/v2.0.6/dist/ol-ext.min.css" />
	<script type="text/javascript" src="https://cdn.rawgit.com/Viglino/ol-ext/v2.0.6/dist/ol-ext.min.js"></script>

  <link href="https://cdn.jsdelivr.net/npm/ol-geocoder@latest/dist/ol-geocoder.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/ol-geocoder"></script>

    <link rel="stylesheet" href="georef.css" />
	<script type="text/javascript" src="helmerttransform.js"></script>
	<script type="text/javascript" src="georef.js"></script>
	<script type="text/javascript" src="wapp.img.js"></script>

</head>
<body >
  <div id="info" class="hidden">
  </div>
  <div id="select">
    <dl class="dl-horizontal clearfix">
        <dt>Name</dt>
        <dd><span id="name"></span></dd>
        <dt>Club</dt>
        <dd><span id="club"></span></dd>
    </dl>
    <button class="button" id="submit-info" disabled>Submit Georeferencing</button>
    <button class="button" id="clear">Clear</button>
    <div id="search-box">
      <label for="event-search">Select map</label>
    <input type="text" id="event-search" placeholder="Name/club/YY/MM/DD"/>
    </div>
    <div id="event-list">
    </div>
    <div id="footer">
      <span id="event-num"></span>
    <div>
  </div>
	<!-- Map div-->
	<div id="map"></div>
	<!-- Image div-->
	<div id="img" class="left-box" style="display: none"></div>
    <div class="left-box" id="instructions">
  <h1>Georeferencer</h1>
  <p> This application is for adding positional information to maps in the
  United Kingdom which lack it.</p>

  <p>After specifying where a map is, it will then appear on the <a href="http://mpickering.github.io/maps.html">main maps site</a>
  once I have verified the position is correct.</p>


  <h2>How to use</h2>
  <ul>
    <li>Click on the map in the left pane to load into the application.</li>
    <li>You can search for a place name using the search box to get closer to the position.</li>
    <li>Click a point on the map image and a corresponding point on the map.</li>
    <li>Repeat this twice, and then the image will appear overlayed on the map.</li>
    <li>If you make a mistake, click "clear" and start again. </li>
    <li>For the best results use roads as the points. </li>
    <li>If the map is of an urban area, you can use the normal OSM layer by selecting OSM rather than OSM-TOPO
        in the layers menu in the top left. You can also modify the opacity of the layer here.</li>
    <li>Once you are happy with the position of the map, click "submit georeferencing".</li>
    <li>I will then verify the submission is correct and the map will be added to the main site.</li>
  </ul>

  Report bugs and suggestions on <a href="https://github.com/mpickering/rg-map">github</a>

  </div>




	<div id="loading" class="dialog hidden" style="">
		<div class="inner">
			<h1>
				<i class="fa fa-2x fa-spinner fa-pulse" style="vertical-align:middle; margin-right:0.5em;"></i>
				Loading...
				<img class="preview" />
			</h1>
		</div>
	</div>

	<div id="info" class="dialog hidden">
		<div class="inner">
			<i class="fa fa-close fa-2x" style="float:right; color:#369; cursor:pointer" onclick="$('#info').addClass('hidden');" ></i>
			<h1>Georef:</h1>
			<textarea style="max-width:100%; min-width:100%; box-sizing:border-box; min-height:12em;"></textarea>
		</div>
	</div>
</body>
</html>
